<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Ultraviolence | Archive</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Bebas+Neue&family=Courier+Prime&family=Homemade+Apple&family=Special+Elite&family=Playfair+Display:ital,wght@1,700&family=Parisienne&family=Dancing+Script&family=IM+Fell+English+SC&family=Libre+Barcode+39&display=swap');

        :root {
            --cherry: #8b0000;
            --cream: #f4f1ea;
            --ink: #1a1a1a;
            --paper: #fdfaf0;
            --leather: #0a0a0a;
        }

        body { background-color: var(--cream); margin: 0; padding: 0; font-family: 'Courier Prime', monospace; overflow: hidden; color: var(--ink); }

        /* NAVIGATION */
        nav {
            background: #000; padding: 15px; display: flex; justify-content: center; gap: 40px;
            border-bottom: 3px solid var(--cherry); z-index: 9999; position: relative;
        }
        nav button {
            background: transparent; border: none; color: white; font-family: 'Bebas Neue'; 
            font-size: 1.5rem; cursor: pointer; letter-spacing: 2px; transition: 0.3s;
        }
        nav button:hover { color: var(--cherry); }

        .view { display: none; height: calc(100vh - 70px); width: 100%; }
        .view.active { display: block; }

        /* HOME PAGE (UNCHANGED) */
        .moodboard { padding: 50px; display: flex; flex-direction: column; align-items: center; background: #000; color: white; height: 100%; }
        .hero-text { font-family: 'Playfair Display'; font-style: italic; font-size: 5rem; margin-bottom: 10px; }
        .scrapbook-area { display: flex; gap: 30px; margin-top: 40px; }
        .polaroid { background: white; padding: 10px 10px 40px 10px; box-shadow: 0 10px 30px rgba(0,0,0,0.5); color: black; text-align: center; }
        .polaroid img { width: 200px; height: 250px; object-fit: cover; }

        /* PLANNER (GOOGLE STYLE) */
        .planner-flex { display: flex; height: 100%; }
        .p-sidebar { width: 280px; background: #000; color: white; padding: 25px; border-right: 2px solid var(--cherry); }
        .todo-input { width: 100%; padding: 10px; background: #111; border: 1px solid #333; color: white; font-family: 'Courier Prime'; margin-top: 10px; }
        .cal-view { flex-grow: 1; display: flex; flex-direction: column; background: white; overflow: hidden; }
        .scroll-grid { overflow-y: auto; flex-grow: 1; display: flex; position: relative; }
        .time-labels { width: 60px; background: #f4f4f4; border-right: 1px solid #ddd; }
        .day-cols { display: grid; grid-template-columns: repeat(7, 1fr); width: 100%; }
        .day-col { border-left: 1px solid #eee; position: relative; height: 1440px; }
        .hour-mark { height: 60px; border-bottom: 1px solid #f9f9f9; }

        /* THE DIARY - BOOK LOGIC */
        .diary-wrap { display: flex; height: 100%; background: #111; align-items: center; justify-content: center; position: relative; }
        
        /* ARCHIVE SIDEBAR */
        .archive-sidebar { width: 260px; height: 100%; background: #000; padding: 30px; border-right: 1px solid #333; color: white; z-index: 10; }
        .archive-sidebar h2 { font-family: 'Bebas Neue'; color: var(--cherry); font-size: 2rem; margin: 0 0 20px 0; }
        .search-box { width: 100%; padding: 10px; background: #111; border: 1px solid #444; color: white; margin-bottom: 20px; }
        #searchResults { max-height: 200px; overflow-y: auto; font-size: 0.8rem; color: #888; }
        .search-item { padding: 5px; cursor: pointer; border-bottom: 1px solid #222; }
        .search-item:hover { color: var(--cherry); }

        /* THE BOOK OBJECT */
        .book-container { perspective: 1500px; }
        .book { 
            width: 850px; height: 550px; position: relative; transform-style: preserve-3d; transition: transform 1s; 
            cursor: pointer; border: 5px solid #222; box-shadow: 0 50px 100px rgba(0,0,0,0.8);
        }
        .book.open { transform: rotateY(0deg); cursor: default; }
        
        .cover {
            position: absolute; width: 100%; height: 100%; background: var(--leather);
            color: white; display: flex; flex-direction: column; align-items: center; justify-content: center;
            z-index: 5; transition: 1s; backface-visibility: hidden;
        }
        .book.open .cover { transform: rotateY(-180deg); z-index: 0; }

        .pages { display: none; width: 100%; height: 100%; background: var(--paper); display: flex; }
        .page { 
            width: 50%; padding: 40px; box-sizing: border-box; position: relative;
            background-image: linear-gradient(#e5e5e5 1px, transparent 1px); background-size: 100% 30px;
        }
        .page-left { border-right: 1px solid rgba(0,0,0,0.1); }
        textarea { 
            width: 100%; height: 100%; background: transparent; border: none; outline: none; 
            resize: none; line-height: 30px; font-size: 18px; 
        }

        .nav-btns { position: absolute; bottom: -60px; width: 100%; display: flex; justify-content: space-between; }
        .nav-btns button { background: black; color: white; border: 1px solid var(--cherry); padding: 10px 20px; font-family: 'Bebas Neue'; cursor: pointer; }

        /* MODAL */
        #modal { display: none; position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); background: white; padding: 30px; border: 5px solid black; z-index: 10000; }
    </style>
</head>
<body>

    <nav>
        <button onclick="tab('home')">HOME</button>
        <button onclick="tab('planner')">PLANNER</button>
        <button onclick="tab('diary')">THE DIARY</button>
    </nav>

    <div id="home" class="view active">
        <div class="moodboard">
            <h1 class="hero-text">ULTRAVIOLENCE</h1>
            <div class="scrapbook-area">
                <div class="polaroid"><img src="Cadillac.png"><br>GETAWAY</div>
                <div class="polaroid"><img src="lanacig.png"><br>LANA</div>
                <div class="polaroid"><img src="coke.png"><br>DIET SODA</div>
            </div>
        </div>
    </div>

    <div id="planner" class="view">
        <div class="planner-flex">
            <div class="p-sidebar">
                <h2 style="font-family:'Bebas Neue'; color:var(--cherry);">LOGBOOK</h2>
                <input type="text" class="todo-input" placeholder="+ Add task..." onkeypress="addTodo(event)">
                <ul id="todoList" style="list-style:none; padding:0; font-size:0.8rem;"></ul>
            </div>
            <div class="cal-view">
                <div style="display:grid; grid-template-columns: 60px repeat(7, 1fr); background:#000; color:white; font-family:'Bebas Neue'; text-align:center; padding:10px 0;">
                    <div></div><div>SUN</div><div>MON</div><div>TUE</div><div>WED</div><div>THU</div><div>FRI</div><div>SAT</div>
                </div>
                <div class="scroll-grid">
                    <div class="time-labels" id="tLabels"></div>
                    <div class="day-cols" id="dCols"></div>
                </div>
            </div>
        </div>
    </div>

    <div id="diary" class="view">
        <div class="diary-wrap">
            <div class="archive-sidebar">
                <h2>ARCHIVES</h2>
                <label style="font-size:0.7rem; letter-spacing:1px;">TYPOGRAPHY</label>
                <select id="fontSelect" onchange="updateDiaryStyle()" class="search-box">
                    <option value="'IM Fell English SC'">Old English</option>
                    <option value="'Courier Prime'">Typewriter</option>
                    <option value="'Homemade Apple'">Handwritten</option>
                    <option value="'Special Elite'">Grunge Elite</option>
                    <option value="'Parisienne'">Coquette</option>
                    <option value="'Libre Barcode 39'">Barcode</option>
                    <option value="'Arial'">Arial</option>
                </select>
                
                <label style="font-size:0.7rem; letter-spacing:1px;">FIND WORD</label>
                <input type="text" class="search-box" placeholder="Search entries..." onkeyup="searchEntries(this.value)">
                <div id="searchResults"></div>
            </div>

            <div class="book-container">
                <div class="book" id="myBook" onclick="openBook()">
                    <div class="cover">
                        <h1 style="font-family:'Playfair Display'; font-size:3rem;">MEMOIRS</h1>
                        <p style="font-family:'Bebas Neue'; letter-spacing:5px; opacity:0.5;">CLICK TO OPEN</p>
                    </div>
                    <div class="pages">
                        <div class="page page-left">
                            <h3 id="diaryDate" style="font-family:'Bebas Neue'; color:var(--cherry); margin:0;"></h3>
                            <textarea id="leftText" onkeyup="saveEntry()" placeholder="Dear Diary..."></textarea>
                        </div>
                        <div class="page">
                            <textarea id="rightText" onkeyup="saveEntry()" placeholder="..."></textarea>
                        </div>
                    </div>
                    <div class="nav-btns">
                        <button onclick="changeDate(-1)">PREV PAGE</button>
                        <button onclick="changeDate(1)">NEXT PAGE</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div id="modal">
        <h3 style="font-family:'Bebas Neue';">NEW EVENT</h3>
        <input type="text" id="evName" placeholder="What's the plan?" style="width:100%; padding:10px;"><br><br>
        <button onclick="saveEv()" style="background:var(--cherry); color:white; border:none; padding:10px; width:100%;">SAVE</button>
    </div>

    <script>
        let currentDate = new Date().toISOString().split('T')[0];
        let allEntries = JSON.parse(localStorage.getItem('uv_archive')) || {};
        let selSlot = null;

        function tab(t) {
            document.querySelectorAll('.view').forEach(v => v.classList.remove('active'));
            document.getElementById(t).classList.add('active');
            if(t==='diary') loadEntry();
        }

        /* PLANNER GENERATION */
        for(let i=0; i<24; i++) {
            let l = document.createElement('div'); l.style.height="60px"; l.style.fontSize="10px"; l.style.textAlign="center"; l.innerText = i+":00";
            document.getElementById('tLabels').appendChild(l);
        }
        for(let d=0; d<7; d++) {
            let col = document.createElement('div'); col.className='day-col';
            for(let h=0; h<24; h++) {
                let slot = document.createElement('div'); slot.className='hour-mark';
                slot.onclick = () => { selSlot={d,h}; document.getElementById('modal').style.display='block'; };
                col.appendChild(slot);
            }
            document.getElementById('dCols').appendChild(col);
        }

        function saveEv() {
            let n = document.getElementById('evName').value;
            let tag = document.createElement('div'); tag.style.position="absolute"; tag.style.top=(selSlot.h*60)+"px";
            tag.style.background="var(--cherry)"; tag.style.color="white"; tag.style.width="100%"; tag.style.fontSize="10px"; tag.innerText=n;
            document.getElementById('dCols').children[selSlot.d].appendChild(tag);
            document.getElementById('modal').style.display='none';
        }

        /* DIARY LOGIC */
        function openBook() { document.getElementById('myBook').classList.add('open'); }

        function loadEntry() {
            document.getElementById('diaryDate').innerText = new Date(currentDate).toLocaleDateString('en-US', {month:'long', day:'numeric', year:'numeric'}).toUpperCase();
            let data = allEntries[currentDate] || {l: "", r: ""};
            document.getElementById('leftText').value = data.l;
            document.getElementById('rightText').value = data.r;
            updateDiaryStyle();
        }

        function saveEntry() {
            allEntries[currentDate] = { l: document.getElementById('leftText').value, r: document.getElementById('rightText').value };
            localStorage.setItem('uv_archive', JSON.stringify(allEntries));
        }

        function changeDate(n) {
            saveEntry();
            let d = new Date(currentDate); d.setDate(d.getDate() + n);
            currentDate = d.toISOString().split('T')[0];
            loadEntry();
        }

        function updateDiaryStyle() {
            let f = document.getElementById('fontSelect').value;
            document.querySelectorAll('#diary textarea').forEach(t => t.style.fontFamily = f);
        }

        function searchEntries(query) {
            let container = document.getElementById('searchResults');
            container.innerHTML = "";
            if(query.length < 2) return;
            for(let date in allEntries) {
                if(allEntries[date].l.includes(query) || allEntries[date].r.includes(query)) {
                    let div = document.createElement('div');
                    div.className = "search-item";
                    div.innerText = "Found in: " + date;
                    div.onclick = () => { currentDate = date; loadEntry(); };
                    container.appendChild(div);
                }
            }
        }

        function addTodo(e) {
            if(e.key === 'Enter') {
                let li = document.createElement('li');
                li.innerHTML = `<input type="checkbox"> ${e.target.value}`;
                li.style.padding = "5px 0";
                document.getElementById('todoList').appendChild(li);
                e.target.value = "";
            }
        }
    </script>
</body>
</html>
