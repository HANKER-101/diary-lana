<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Ultraviolence | Archive</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Bebas+Neue&family=Courier+Prime&family=Homemade+Apple&family=Special+Elite&family=Playfair+Display:ital,wght@1,900&display=swap');

        :root {
            --cherry: #8b0000;
            --cream: #f4f1ea;
            --ink: #1a1a1a;
            --paper: #fdfaf0;
        }

        body, html { margin: 0; padding: 0; height: 100%; width: 100%; background: #000; overflow: hidden; font-family: 'Courier Prime', monospace; }

        /* NAVIGATION - ABSOLUTE TOP */
        nav {
            height: 80px; background: #000; display: flex; justify-content: center; align-items: center; gap: 60px;
            border-bottom: 2px solid var(--cherry); position: relative; z-index: 1000;
        }
        nav button {
            background: transparent; border: none; color: white; font-family: 'Bebas Neue'; font-size: 2.2rem;
            cursor: pointer; letter-spacing: 5px; transition: 0.3s;
        }
        nav button:hover { color: var(--cherry); }
        .active-nav { color: var(--cherry) !important; text-decoration: underline; }

        .view-container { height: calc(100vh - 82px); position: relative; width: 100%; background: var(--cream); }
        .view { display: none; height: 100%; width: 100%; position: absolute; top: 0; left: 0; }
        .view.active { display: flex; }

        /* HOME PAGE */
        #home { background: #000; flex-direction: column; align-items: center; justify-content: center; color: white; }
        .hero-title { font-family: 'Bebas Neue'; font-size: 9rem; letter-spacing: 15px; margin: 0; }
        .scrapbook { display: flex; gap: 30px; margin-top: 40px; }
        .polaroid { background: white; padding: 10px 10px 45px 10px; box-shadow: 0 20px 50px rgba(0,0,0,0.5); position: relative; transition: 0.5s; }
        .polaroid img { width: 220px; height: 280px; object-fit: cover; filter: grayscale(100%); transition: 1s; }
        .polaroid span { position: absolute; bottom: 10px; left: 0; width: 100%; text-align: center; color: #000; font-family: 'Bebas Neue'; font-size: 1.4rem; }
        .polaroid:hover { transform: scale(1.05) rotate(0deg) !important; z-index: 10; }
        .polaroid:hover img { filter: grayscale(0%); }

        /* GOOGLE STYLE PLANNER */
        .planner-wrap { display: flex; width: 100%; background: white; }
        .planner-sidebar { width: 260px; border-right: 1px solid #ddd; padding: 20px; flex-shrink: 0; }
        .planner-grid { flex-grow: 1; display: grid; grid-template-columns: 60px repeat(7, 1fr); overflow-y: auto; }
        .hour-label { height: 60px; border-bottom: 1px solid #eee; border-right: 1px solid #eee; color: #999; font-size: 0.7rem; text-align: right; padding-right: 5px; padding-top: 5px; }
        .day-cell { height: 60px; border-bottom: 1px solid #eee; border-right: 1px solid #eee; position: relative; cursor: cell; }
        .day-cell:hover { background: rgba(139, 0, 0, 0.05); }
        .event-chip { position: absolute; inset: 2px; background: var(--cherry); color: white; padding: 4px; border-radius: 4px; font-size: 0.7rem; cursor: pointer; }

        /* DIARY & 3D PAGE TURN */
        .diary-wrap { display: flex; width: 100%; height: 100%; }
        .archive-side { width: 300px; background: #000; color: white; padding: 30px; display: flex; flex-direction: column; gap: 20px; border-right: 2px solid var(--cherry); box-sizing: border-box; }
        .archive-side h2 { font-family: 'Bebas Neue'; font-size: 2.5rem; color: var(--cherry); margin: 0; }
        .archive-side select, .archive-side input { background: #222; color: white; border: 1px solid #444; padding: 10px; width: 100%; }

        .book-room { flex-grow: 1; background: #130d0a; display: flex; align-items: center; justify-content: center; perspective: 2000px; }
        .book { width: 900px; height: 600px; display: flex; box-shadow: 0 50px 100px #000; position: relative; transform-style: preserve-3d; transition: transform 0.8s cubic-bezier(0.645, 0.045, 0.355, 1); }
        .page { width: 50%; height: 100%; padding: 50px; background: var(--paper); box-sizing: border-box; background-image: linear-gradient(#e5e5e5 1px, transparent 1px); background-size: 100% 35px; backface-visibility: hidden; }
        .page-left { border-right: 2px solid rgba(0,0,0,0.15); }
        
        /* THE FLIP */
        .page-flipping { transform: rotateY(-180deg); }
        textarea { width: 100%; height: 100%; background: transparent; border: none; outline: none; resize: none; line-height: 35px; font-size: 1.2rem; }

        .controls { position: absolute; bottom: 30px; display: flex; gap: 400px; }
        .ctrl-btn { background: #000; color: white; border: none; padding: 15px 40px; font-family: 'Bebas Neue'; font-size: 1.5rem; cursor: pointer; transition: 0.3s; }
        .ctrl-btn:hover { background: var(--cherry); }
    </style>
</head>
<body>

    <nav>
        <button onclick="tab('home')" id="tab-home">HOME</button>
        <button onclick="tab('planner')" id="tab-planner">PLANNER</button>
        <button onclick="tab('diary')" id="tab-diary">THE DIARY</button>
    </nav>

    <div class="view-container">
        <div id="home" class="view active">
            <h1 class="hero-title">ULTRAVIOLENCE</h1>
            <div class="scrapbook">
                <div class="polaroid" style="transform: rotate(-3deg);"><img src="Cadillac.png"><span>GETAWAY</span></div>
                <div class="polaroid" style="transform: rotate(2deg);"><img src="lanacig.png"><span>LANA</span></div>
                <div class="polaroid" style="transform: rotate(-1deg);"><img src="coke.png"><span>DIET SODA</span></div>
            </div>
        </div>

        <div id="planner" class="view">
            <div class="planner-wrap">
                <div class="planner-sidebar">
                    <h2 style="font-family:'Bebas Neue'">FEB 2026</h2>
                    <hr>
                    <p style="font-size:0.8rem">MY SCHEDULE</p>
                </div>
                <div class="planner-grid" id="planGrid"></div>
            </div>
        </div>

        <div id="diary" class="view">
            <div class="diary-wrap">
                <div class="archive-side">
                    <h2>ARCHIVES</h2>
                    <label>STYLE</label>
                    <select id="fnt" onchange="upStyle()">
                        <option value="'Homemade Apple'">Handwritten</option>
                        <option value="'Special Elite'">Grunge</option>
                        <option value="'Courier Prime'">Typewriter</option>
                    </select>
                    <label>JUMP TO</label>
                    <input type="date" onchange="jump(this.value)">
                    <input type="text" placeholder="Search entries..." onkeyup="doSearch(this.value)">
                    <div id="searchRes" style="font-size:0.7rem; overflow-y:auto; flex-grow:1;"></div>
                </div>
                <div class="book-room">
                    <div class="book" id="bookElement">
                        <div class="page page-left">
                            <h3 id="dateHeader" style="font-family:'Bebas Neue'; color:var(--cherry); margin:0 0 10px 0;"></h3>
                            <textarea id="areaL" onkeyup="save()" placeholder="Write..."></textarea>
                        </div>
                        <div class="page">
                            <textarea id="areaR" onkeyup="save()" placeholder="Continue..."></textarea>
                        </div>
                    </div>
                    <div class="controls">
                        <button class="ctrl-btn" onclick="move(-1)">PREVIOUS</button>
                        <button class="ctrl-btn" onclick="move(1)">NEXT</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        let currDay = new Date().toISOString().split('T')[0];
        let diaryLogs = JSON.parse(localStorage.getItem('uv_logs_vFinal')) || {};
        let planEvs = JSON.parse(localStorage.getItem('uv_plan_vFinal')) || {};

        function tab(t) {
            document.querySelectorAll('.view').forEach(v => v.classList.remove('active'));
            document.querySelectorAll('nav button').forEach(b => b.classList.remove('active-nav'));
            document.getElementById(t).classList.add('active');
            document.getElementById('tab-'+t).classList.add('active-nav');
            if(t === 'planner') initPlanner();
            if(t === 'diary') initDiary();
        }

        /* PLANNER - GOOGLE CALENDAR STYLE */
        function initPlanner() {
            const grid = document.getElementById('planGrid');
            grid.innerHTML = "";
            for(let h=0; h<24; h++) {
                const lbl = document.createElement('div');
                lbl.className = 'hour-label'; lbl.innerText = h + ":00";
                grid.appendChild(lbl);
                for(let d=0; d<7; d++) {
                    const cell = document.createElement('div');
                    cell.className = 'day-cell';
                    let key = d + '-' + h;
                    if(planEvs[key]) cell.innerHTML = `<div class="event-chip" onclick="event.stopPropagation(); delEv('${key}')">${planEvs[key]}</div>`;
                    cell.onclick = () => { let v = prompt("Event?"); if(v) { planEvs[key]=v; savePlan(); } };
                    grid.appendChild(cell);
                }
            }
        }
        function savePlan() { localStorage.setItem('uv_plan_vFinal', JSON.stringify(planEvs)); initPlanner(); }
        function delEv(k) { delete planEvs[k]; savePlan(); }

        /* DIARY - 3D PAGE TURN */
        function initDiary() {
            const b = document.getElementById('bookElement');
            b.style.transform = "rotateY(-15deg) scale(0.9)"; // Sensation of a flip
            setTimeout(() => {
                document.getElementById('dateHeader').innerText = new Date(currDay).toLocaleDateString('en-US', {month:'long', day:'numeric'}).toUpperCase();
                let data = diaryLogs[currDay] || {l:"", r:""};
                document.getElementById('areaL').value = data.l;
                document.getElementById('areaR').value = data.r;
                b.style.transform = "rotateY(0deg) scale(1)";
                upStyle();
            }, 300);
        }

        function save() {
            diaryLogs[currDay] = { l: document.getElementById('areaL').value, r: document.getElementById('areaR').value };
            localStorage.setItem('uv_logs_vFinal', JSON.stringify(diaryLogs));
        }

        function move(n) {
            save();
            let d = new Date(currDay); d.setDate(d.getDate() + n);
            currDay = d.toISOString().split('T')[0];
            initDiary();
        }

        function upStyle() {
            const f = document.getElementById('fnt').value;
            document.querySelectorAll('#diary textarea').forEach(t => t.style.fontFamily = f);
        }

        function jump(v) { currDay = v; initDiary(); }
        
        function doSearch(q) {
            const r = document.getElementById('searchRes'); r.innerHTML = "";
            if(q.length < 2) return;
            for(let d in diaryLogs) {
                if(diaryLogs[d].l.includes(q)) {
                    let i = document.createElement('div'); i.innerText = d; i.style.padding="5px"; i.onclick = () => jump(d); r.appendChild(i);
                }
            }
        }
    </script>
</body>
</html>
