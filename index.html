<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Ultraviolence | Archive</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Bebas+Neue&family=Courier+Prime&family=Homemade+Apple&family=Special+Elite&display=swap');

        :root {
            --cherry: #8b0000;
            --cream: #f4f1ea;
            --ink: #1a1a1a;
        }

        /* RESET - ALLOW SCROLLING */
        * { box-sizing: border-box; }
        body, html { 
            margin: 0; padding: 0; background: #000; 
            font-family: 'Courier Prime', monospace; 
            color: var(--ink);
            overflow-x: hidden; /* Prevent side-scrolling only */
        }

        /* NAVIGATION - STICKY BUT NOT OBSTRUCTIVE */
        nav {
            background: #000; height: 90px; width: 100%;
            display: flex; justify-content: center; align-items: center; gap: 40px;
            border-bottom: 3px solid var(--cherry);
            position: sticky; top: 0; z-index: 9999;
        }
        nav button {
            background: transparent; border: none; color: white; 
            font-family: 'Bebas Neue'; font-size: 2.2rem; 
            cursor: pointer; letter-spacing: 5px; transition: 0.3s;
        }
        nav button:hover { color: var(--cherry); }
        .active-nav { color: var(--cherry) !important; text-decoration: underline; }

        /* VIEW LOGIC - FLEX COLUMN */
        .view { display: none; min-height: calc(100vh - 90px); width: 100%; background: var(--cream); }
        .view.active { display: flex; flex-direction: column; }

        /* HOME PAGE - SCROLLABLE */
        #home { background: #000; color: white; align-items: center; padding: 60px 20px; }
        .hero-title { font-family: 'Bebas Neue'; font-size: clamp(4rem, 10vw, 9rem); letter-spacing: 15px; margin: 0; }
        
        .scrapbook { 
            display: flex; flex-wrap: wrap; justify-content: center; 
            gap: 40px; margin-top: 50px; width: 100%; 
        }
        .polaroid { 
            background: white; padding: 15px 15px 60px 15px; 
            box-shadow: 0 20px 50px rgba(0,0,0,0.8); position: relative; 
            transition: 0.5s; 
        }
        .polaroid img { width: 250px; height: 320px; object-fit: cover; filter: grayscale(100%); display: block; }
        .polaroid p { 
            position: absolute; bottom: 10px; left: 0; width: 100%; 
            text-align: center; color: black; font-family: 'Bebas Neue'; 
            font-size: 1.6rem; margin: 0; 
        }
        .polaroid:hover { transform: scale(1.05) rotate(0deg) !important; }
        .polaroid:hover img { filter: grayscale(0%); }

        /* PLANNER - VERTICAL GRID */
        .planner-container { display: flex; flex-direction: row; height: 100%; min-height: 800px; background: white; }
        .planner-sidebar { width: 200px; border-right: 1px solid #ddd; background: #f9f9f9; padding: 20px; flex-shrink: 0; }
        .calendar-main { flex-grow: 1; display: grid; grid-template-columns: 80px repeat(7, 1fr); overflow-y: auto; }
        .time-row { height: 60px; border-bottom: 1px solid #eee; border-right: 1px solid #eee; color: #999; font-size: 0.7rem; text-align: right; padding: 5px; }
        .slot { height: 60px; border-bottom: 1px solid #eee; border-right: 1px solid #eee; position: relative; cursor: cell; }
        .event-box { position: absolute; inset: 2px; background: var(--cherry); color: white; padding: 5px; font-size: 0.7rem; border-radius: 4px; overflow: hidden; }

        /* DIARY - FLEX LAYOUT */
        .diary-container { display: flex; flex-direction: row; height: calc(100vh - 90px); }
        .archive-sidebar { 
            width: 280px; background: #000; color: white; padding: 20px; 
            display: flex; flex-direction: column; gap: 15px; overflow-y: auto;
        }
        .archive-sidebar h2 { font-family: 'Bebas Neue'; font-size: 2rem; color: var(--cherry); margin: 0; }
        .archive-sidebar select, .archive-sidebar input { background: #1a1a1a; color: white; border: 1px solid #333; padding: 10px; width: 100%; }

        .book-stage { 
            flex-grow: 1; background: #130d0a; display: flex; 
            align-items: center; justify-content: center; position: relative;
        }
        .book { 
            width: 90%; max-width: 900px; height: 80%; background: #fdfaf0; 
            display: flex; box-shadow: 0 30px 60px rgba(0,0,0,0.5); 
            transition: opacity 0.3s ease;
        }
        .page { width: 50%; padding: 40px; border: 1px solid rgba(0,0,0,0.05); }
        .page-left { border-right: 2px solid rgba(0,0,0,0.1); }
        textarea { 
            width: 100%; height: 100%; background: transparent; border: none; 
            outline: none; resize: none; font-size: 1.2rem; line-height: 1.6;
        }

        .controls { position: absolute; bottom: 20px; display: flex; gap: 20px; }
        .controls button { background: #000; color: white; border: none; padding: 10px 30px; font-family: 'Bebas Neue'; font-size: 1.2rem; cursor: pointer; }
    </style>
</head>
<body>

    <nav>
        <button onclick="tab('home')" id="btn-home">HOME</button>
        <button onclick="tab('planner')" id="btn-planner">PLANNER</button>
        <button onclick="tab('diary')" id="btn-diary">THE DIARY</button>
    </nav>

    <div id="home" class="view active">
        <h1 class="hero-title">ULTRAVIOLENCE</h1>
        <div class="scrapbook">
            <div class="polaroid" style="transform:rotate(-2deg)"><img src="Cadillac.png"><p>GETAWAY</p></div>
            <div class="polaroid" style="transform:rotate(3deg)"><img src="lanacig.png"><p>LANA</p></div>
            <div class="polaroid" style="transform:rotate(-1deg)"><img src="coke.png"><p>DIET SODA</p></div>
        </div>
    </div>

    <div id="planner" class="view">
        <div class="planner-container">
            <div class="planner-sidebar">
                <h3 style="font-family:'Bebas Neue'; color:var(--cherry)">SCHEDULE</h3>
                <p style="font-size:0.7rem">FEB 2026</p>
            </div>
            <div class="calendar-main" id="calGrid"></div>
        </div>
    </div>

    <div id="diary" class="view">
        <div class="diary-container">
            <div class="archive-sidebar">
                <h2>ARCHIVES</h2>
                <label style="font-size:0.7rem">FONT</label>
                <select id="fSelect" onchange="upStyle()">
                    <option value="'Homemade Apple'">Handwritten</option>
                    <option value="'Special Elite'">Grunge</option>
                    <option value="'Courier Prime'">Typewriter</option>
                </select>
                <label style="font-size:0.7rem">JUMP</label>
                <input type="date" onchange="jump(this.value)">
                <div id="results" style="font-size:0.7rem; color:#888;"></div>
            </div>
            <div class="book-stage">
                <div class="book" id="diaryBook">
                    <div class="page page-left">
                        <h4 id="dateH" style="margin:0; font-family:'Bebas Neue'; color:var(--cherry); font-size:1.5rem;"></h4>
                        <textarea id="L" onkeyup="save()" placeholder="Write..."></textarea>
                    </div>
                    <div class="page">
                        <textarea id="R" onkeyup="save()" placeholder="..."></textarea>
                    </div>
                </div>
                <div class="controls">
                    <button onclick="move(-1)">PREV</button>
                    <button onclick="move(1)">NEXT</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        let day = new Date().toISOString().split('T')[0];
        let logs = JSON.parse(localStorage.getItem('uv_logs')) || {};
        let plan = JSON.parse(localStorage.getItem('uv_plan')) || {};

        function tab(t) {
            // 1. Clear all active views
            document.querySelectorAll('.view').forEach(v => v.classList.remove('active'));
            document.querySelectorAll('nav button').forEach(b => b.classList.remove('active-nav'));
            
            // 2. Activate the selected one
            const target = document.getElementById(t);
            if(target) {
                target.classList.add('active');
                document.getElementById('btn-'+t).classList.add('active-nav');
            }

            // 3. Init sub-sections
            if(t === 'planner') initPlanner();
            if(t === 'diary') initDiary();
        }

        /* PLANNER LOGIC */
        function initPlanner() {
            const grid = document.getElementById('calGrid');
            grid.innerHTML = "";
            for(let h=0; h<24; h++) {
                let lbl = document.createElement('div');
                lbl.className = 'time-row'; lbl.innerText = h + ":00";
                grid.appendChild(lbl);
                for(let d=0; d<7; d++) {
                    let cell = document.createElement('div');
                    cell.className = 'slot';
                    let key = d + '-' + h;
                    if(plan[key]) cell.innerHTML = `<div class="event-box" onclick="event.stopPropagation(); delPlan('${key}')">${plan[key]}</div>`;
                    cell.onclick = () => { let v = prompt("Event?"); if(v){ plan[key]=v; savePlan(); } };
                    grid.appendChild(cell);
                }
            }
        }
        function savePlan() { localStorage.setItem('uv_plan', JSON.stringify(plan)); initPlanner(); }
        function delPlan(k) { delete plan[k]; savePlan(); }

        /* DIARY LOGIC */
        function initDiary() {
            const book = document.getElementById('diaryBook');
            book.style.opacity = "0.4"; // Simple "turn" effect
            setTimeout(() => {
                document.getElementById('dateH').innerText = new Date(day).toLocaleDateString('en-US', {month:'short', day:'numeric'}).toUpperCase();
                let data = logs[day] || {l:"", r:""};
                document.getElementById('L').value = data.l;
                document.getElementById('R').value = data.r;
                book.style.opacity = "1";
                upStyle();
            }, 200);
        }
        function save() {
            logs[day] = { l: document.getElementById('L').value, r: document.getElementById('R').value };
            localStorage.setItem('uv_logs', JSON.stringify(logs));
        }
        function move(n) {
            save();
            let d = new Date(day); d.setDate(d.getDate() + n);
            day = d.toISOString().split('T')[0];
            initDiary();
        }
        function upStyle() {
            const f = document.getElementById('fSelect').value;
            document.querySelectorAll('textarea').forEach(t => t.style.fontFamily = f);
        }
        function jump(v) { day = v; initDiary(); }

        // Start at Home
        tab('home');
    </script>
</body>
</html>
