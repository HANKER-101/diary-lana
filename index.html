<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Ultraviolence | Pro Planner & Diary</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Bebas+Neue&family=Times+New+Roman&family=Malibu&family=Courier+Prime&family=Homemade+Apple&family=Special+Elite&family=Playfair+Display:ital,wght@1,700&family=Parisienne&family=Dancing+Script&family=IM+Fell+English+SC&family=Libre+Barcode+39&display=swap');

        :root {
            --cherry: #8b0000;
            --cream: #f4f1ea;
            --ink: #1a1a1a; 
            --paper: #fdfaf0;
        }

        body { background-color: var(--cream); margin: 0; padding: 0; font-family: 'Courier Prime', monospace; overflow-x: hidden; color: var(--ink); min-height: 100vh; }

        nav {
            background: #000; padding: 20px; display: flex; justify-content: center; gap: 50px;
            position: sticky; top: 0; z-index: 9999; border-bottom: 4px solid var(--cherry);
        }
        nav button {
            background: transparent; border: none; color: white; font-family: 'Bebas Neue'; 
            font-size: 1.8rem; cursor: pointer; letter-spacing: 3px; transition: 0.3s;
        }
        nav button:hover { color: var(--cherry); }

        .view { display: none; width: 100%; min-height: 100vh; }
        .view.active { display: block !important; }

        /* HOME / MOODBOARD */
        .moodboard { padding: 50px; display: flex; flex-direction: column; align-items: center; background: #000; color: white; min-height: 100vh; }
        .hero-text { font-family: 'Playfair Display'; font-style: italic; font-size: 6rem; margin: 20px 0 0 0; color: white; }
        .scrapbook-area { display: flex; flex-direction: row; justify-content: center; align-items: center; gap: 40px; margin-top: 40px; width: 100%; flex-wrap: nowrap; }
        .polaroid { background: white; padding: 15px 15px 60px 15px; box-shadow: 0 20px 40px rgba(0,0,0,0.5); transition: all 0.4s ease; cursor: pointer; width: 250px; flex-shrink: 0; }
        .polaroid img { width: 100%; height: 300px; object-fit: cover; filter: grayscale(100%); transition: 0.6s; }
        .polaroid:hover { transform: scale(1.05); z-index: 10; }
        .polaroid:hover img { filter: grayscale(0%); }

        /* PLANNER & CHECKLIST */
        .planner-container { display: flex; height: calc(100vh - 80px); background: white; }
        .sidebar { width: 300px; background: #000; color: white; padding: 25px; border-right: 2px solid var(--cherry); display: flex; flex-direction: column; }
        .sidebar h2 { font-family: 'Bebas Neue'; color: var(--cherry); font-size: 2rem; }
        .todo-input { width: 100%; padding: 10px; background: #111; border: 1px solid #333; color: white; margin-bottom: 15px; font-family: 'Courier Prime'; box-sizing: border-box; }
        
        .todo-list { flex-grow: 1; overflow-y: auto; list-style: none; padding: 0; }
        .todo-item { display: flex; align-items: center; gap: 10px; border-bottom: 1px solid #222; padding: 10px 0; font-size: 0.85rem; }
        
        /* Custom Checkbox */
        .todo-item input[type="checkbox"] { appearance: none; width: 18px; height: 18px; border: 2px solid var(--cherry); cursor: pointer; position: relative; }
        .todo-item input[type="checkbox"]:checked { background: var(--cherry); }
        .todo-item input[type="checkbox"]:checked::after { content: '✓'; color: white; position: absolute; top: -3px; left: 2px; font-size: 14px; }
        .todo-item span { flex-grow: 1; cursor: pointer; }
        .todo-item input[type="checkbox"]:checked + span { text-decoration: line-through; opacity: 0.5; }
        .del-todo { background: none; border: none; color: #444; cursor: pointer; font-size: 14px; transition: 0.3s; }
        .del-todo:hover { color: var(--cherry); }

        /* CALENDAR GRID */
        .calendar-view { flex-grow: 1; display: flex; flex-direction: column; overflow: hidden; }
        .grid-header { display: grid; grid-template-columns: 80px repeat(7, 1fr); background: #f9f9f9; border-bottom: 2px solid #000; }
        .day-label { padding: 10px; text-align: center; border-left: 1px solid #ddd; font-family: 'Bebas Neue'; }
        .scroll-area { overflow-y: scroll; flex-grow: 1; display: flex; }
        .time-col { width: 80px; background: #f0f0f0; border-right: 1px solid #ccc; }
        .time-slot-label { height: 60px; text-align: center; font-size: 0.7rem; color: #888; border-bottom: 1px solid #eee; line-height: 60px; }
        .grid-columns { display: grid; grid-template-columns: repeat(7, 1fr); width: 100%; }
        .grid-day { border-left: 1px solid #eee; height: 1440px; position: relative; }
        .hour-slot { height: 60px; border-bottom: 1px solid #f0f0f0; cursor: cell; }
        
        /* Event Styling & Actions */
        .event { position: absolute; left: 2px; right: 2px; background: var(--cherry); color: white; padding: 6px; font-size: 0.7rem; border-radius: 3px; z-index: 5; cursor: pointer; overflow: hidden; }
        .event-actions { display: none; position: absolute; right: 2px; top: 2px; background: rgba(0,0,0,0.8); gap: 2px; }
        .event:hover .event-actions { display: flex; }
        .ev-btn { background: #000; color: white; border: none; font-size: 8px; cursor: pointer; padding: 2px 4px; font-family: 'Bebas Neue'; }
        .ev-btn:hover { color: var(--cherry); }

        /* DIARY SIDEBAR CONTROLS */
        #diary.active { display: flex !important; justify-content: center; align-items: center; }
        .archive-side { width: 280px; background: rgba(0,0,0,0.9); color: white; padding: 25px; height: 650px; display: flex; flex-direction: column; gap: 15px; }
        .archive-side label { font-family: 'Bebas Neue'; letter-spacing: 2px; font-size: 0.8rem; color: #888; margin-top: 10px; }
        
        .archive-side select, .archive-side input { 
            background: #111; border: 1px solid #333; color: white; padding: 10px; 
            font-family: 'Courier Prime'; outline: none; transition: 0.3s; width: 100%; box-sizing: border-box;
        }
        .archive-side select:focus, .archive-side input:focus { border-color: var(--cherry); }

        #bookWrapper { position: relative; perspective: 1500px; width: 900px; height: 650px; }
        #bookCover { width: 100%; height: 100%; background: #1a120d; border: 10px solid #000; border-left: 25px solid #000; box-shadow: 20px 20px 50px rgba(0,0,0,0.8); display: flex; align-items: center; justify-content: center; cursor: pointer; z-index: 100; position: absolute; transition: 0.8s; transform-origin: left; }
        .book { width: 100%; height: 100%; background: var(--paper); display: flex; box-shadow: 0 0 60px #000; position: relative; border: 4px solid #000; visibility: hidden; }
        .page-content { width: 50%; padding: 50px; background-image: linear-gradient(#e5e5e5 1px, transparent 1px); background-size: 100% 35px; position: relative; box-sizing: border-box;}
        textarea { width: 100%; height: 100%; background: transparent; border: none; outline: none; resize: none; line-height: 35px; }
        
        #modal { display: none; position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); background: white; border: 5px solid #000; padding: 30px; z-index: 10001; width: 300px;}
    </style>
</head>
<body>

    <nav>
        <button onclick="tab('home')">HOME</button>
        <button onclick="tab('planner')">PLANNER</button>
        <button onclick="tab('diary')">THE DIARY</button>
    </nav>

    <div id="home" class="view active">
        <div class="moodboard">
            <h1 class="hero-text">West Coast Log</h1>
            <p style="letter-spacing: 5px; opacity: 0.7;">VINTAGE ARCHIVE.</p>
            <div class="scrapbook-area">
                <div class="polaroid"><img src="lanaflag.png"><p style="color:black;text-align:center;font-family:'Dancing Script';">"Red, white, blue"</p></div>
                <div class="polaroid"><img src="coke.png"><p style="color:black;text-align:center;font-family:'Dancing Script';">"Coca-Cola"</p></div>
                <div class="polaroid"><img src="lanacig.png"><p style="color:black;text-align:center;font-family:'Dancing Script';">"Sweet like cigarettes"</p></div>
            </div>
        </div>
    </div>

    <div id="planner" class="view">
        <div class="planner-container">
            <div class="sidebar">
                <h2>CHECKLIST</h2>
                <input type="text" class="todo-input" id="todoInp" placeholder="+ Add task..." onkeypress="addTodo(event)">
                <ul class="todo-list" id="todoList"></ul>
            </div>
            <div class="calendar-view">
                <div class="grid-header">
                    <div style="width:80px"></div>
                    <div class="day-label">SUN</div><div class="day-label">MON</div><div class="day-label">TUE</div><div class="day-label">WED</div><div class="day-label">THU</div><div class="day-label">FRI</div><div class="day-label">SAT</div>
                </div>
                <div class="scroll-area">
                    <div class="time-col" id="timeLabels"></div>
                    <div class="grid-columns" id="gridCols"></div>
                </div>
            </div>
        </div>
    </div>

    <div id="diary" class="view">
        <div class="archive-side">
            <h3 style="font-family:'Times New Roman'; color:var(--cherry); font-size:2rem; margin:0;">ARCHIVES</h3>
            <label>TYPEFACE</label>
            <select id="fnt" onchange="styleBook()">
                <option value="'Courier Prime'">Typewriter</option>
                <option value="'Homemade Apple'">Handwritten</option>
                <option value="'Special Elite'">Grunge Elite</option>
                <option value="'Dancing Script'">Cursive Script</option>
            </select>
            <label>INK SIZE</label>
            <input type="range" id="sz" min="14" max="35" value="20" oninput="styleBook()">
            <label>JUMP TO DATE</label>
            <input type="date" id="dateJump" onchange="jump(this.value)">
            <label>SEARCH LOGS</label>
            <input type="text" id="searchTerm" placeholder="Keywords..." onkeyup="searchWords()">
            <div id="searchResults" style="overflow-y:auto; flex-grow:1;"></div>
            <button onclick="deleteEntry()" style="color:var(--cherry); border:1px solid var(--cherry); background:none; cursor:pointer; font-family:'Bebas Neue'; padding:10px;">BURN ENTRY</button>
            <button onclick="closeBook()" style="background:var(--cherry); color:white; border:none; padding:10px; cursor:pointer; font-family:'Bebas Neue';">CLOSE ARCHIVE</button>
        </div>
        <div id="bookWrapper">
            <div id="bookCover" onclick="openBook()">
                <div style="text-align:center; border:2px solid var(--cherry); padding:40px;">
                    <h1 style="font-family:'Playfair Display'; color:var(--cream); font-size:3rem;">ULTRAVIOLENCE</h1>
                    <p style="font-family:'Bebas Neue'; color:var(--cherry); letter-spacing:5px;">PRIVATE ARCHIVE</p>
                </div>
            </div>
            <div class="book" id="bookObj">
                <div class="page-content" style="border-right:1px solid #ddd;">
                    <h3 id="dateDisplay" style="font-family:'Bebas Neue'; color:var(--cherry);"></h3>
                    <textarea id="txtL" onkeyup="save()" placeholder="Write..."></textarea>
                    <button onclick="move(-1)" style="position:absolute; bottom:20px; left:20px; background:black; color:white; border:none; padding:5px 15px; cursor:pointer; font-family:'Bebas Neue';">PREV</button>
                </div>
                <div class="page-content">
                    <textarea id="txtR" onkeyup="save()" placeholder="..."></textarea>
                    <button onclick="move(1)" style="position:absolute; bottom:20px; right:20px; background:black; color:white; border:none; padding:5px 15px; cursor:pointer; font-family:'Bebas Neue';">NEXT</button>
                </div>
            </div>
        </div>
    </div>

    <div id="modal">
        <h3 style="font-family:'Bebas Neue'; color:var(--cherry);">NEW EVENT</h3>
        <input type="text" id="evN" placeholder="Description..." style="width:100%; padding:10px; box-sizing:border-box;"><br><br>
        <button onclick="saveEv()" style="background:var(--cherry); color:white; width:100%; border:none; padding:10px; font-family:'Bebas Neue'; cursor:pointer;">SAVE</button>
        <button onclick="document.getElementById('modal').style.display='none'" style="width:100%; border:none; padding:5px; margin-top:5px; cursor:pointer;">CANCEL</button>
    </div>

    <script>
        let day = new Date().toISOString().split('T')[0];
        let logs = JSON.parse(localStorage.getItem('uv_logs')) || {};
        let selSlot = null;

        function tab(t) {
            document.querySelectorAll('.view').forEach(v => {
                v.classList.remove('active');
                v.style.display = "none";
            });
            const target = document.getElementById(t);
            target.classList.add('active');
            target.style.display = (t === 'diary') ? "flex" : "block";
            if(t==='diary') buildDiary();
        }

        /* PLANNER LOGIC */
        for(let i=0; i<24; i++) {
            let l = document.createElement('div'); l.className='time-slot-label'; l.innerText=i+":00";
            document.getElementById('timeLabels').appendChild(l);
        }
        for(let d=0; d<7; d++) {
            let col = document.createElement('div'); col.className='grid-day';
            for(let h=0; h<24; h++) {
                let s = document.createElement('div'); s.className='hour-slot';
                s.onclick = () => { selSlot={d,h}; document.getElementById('modal').style.display='block'; };
                col.appendChild(s);
            }
            document.getElementById('gridCols').appendChild(col);
        }

        function saveEv() {
            const n = document.getElementById('evN').value;
            if(!n) return;
            const id = Date.now();
            const ev = document.createElement('div');
            ev.className = 'event'; ev.id = `ev-${id}`;
            ev.style.top = (selSlot.h * 60 + 5) + "px";
            ev.innerHTML = `<span onclick="alert('Details: ${n}')">${n}</span>
                <div class="event-actions">
                    <button class="ev-btn" onclick="editEv('${id}')">EDIT</button>
                    <button class="ev-btn" onclick="delEv('${id}')">X</button>
                </div>`;
            document.getElementById('gridCols').children[selSlot.d].appendChild(ev);
            document.getElementById('modal').style.display = 'none';
            document.getElementById('evN').value = "";
        }

        function delEv(id) { event.stopPropagation(); document.getElementById(`ev-${id}`).remove(); }
        function editEv(id) { 
            event.stopPropagation();
            const span = document.querySelector(`#ev-${id} span`);
            const newVal = prompt("Edit event:", span.innerText);
            if(newVal) span.innerText = newVal;
        }

        /* CHECKLIST LOGIC */
        function addTodo(e) {
            if(e.key==='Enter' && e.target.value!=="") {
                const id = Date.now();
                const li = document.createElement('li');
                li.className = 'todo-item'; li.id = `todo-${id}`;
                li.innerHTML = `<input type="checkbox"> <span onclick="editTodo('${id}')">${e.target.value}</span>
                    <button class="del-todo" onclick="delTodo('${id}')">✕</button>`;
                document.getElementById('todoList').appendChild(li);
                e.target.value = "";
            }
        }
        function delTodo(id) { document.getElementById(`todo-${id}`).remove(); }
        function editTodo(id) {
            const span = document.querySelector(`#todo-${id} span`);
            const newVal = prompt("Edit task:", span.innerText);
            if(newVal) span.innerText = newVal;
        }

        /* DIARY LOGIC */
        function buildDiary() {
            document.getElementById('dateDisplay').innerText = new Date(day + 'T12:00:00').toLocaleDateString('en-US', {month:'long', day:'numeric', year:'numeric'}).toUpperCase();
            let data = logs[day] || {l:"", r:""};
            document.getElementById('txtL').value = data.l; 
            document.getElementById('txtR').value = data.r;
            styleBook();
        }

        function save() {
            logs[day] = {l: document.getElementById('txtL').value, r: document.getElementById('txtR').value};
            localStorage.setItem('uv_logs', JSON.stringify(logs));
        }

        function move(n) {
            save(); 
            let d = new Date(day + 'T12:00:00');
            d.setDate(d.getDate() + n); 
            day = d.toISOString().split('T')[0]; 
            buildDiary();
        }

        function openBook() {
            const cover = document.getElementById('bookCover');
            const book = document.getElementById('bookObj');
            cover.style.transform = "rotateY(-110deg)";
            cover.style.opacity = "0";
            setTimeout(() => { cover.style.visibility = "hidden"; book.style.visibility = "visible"; }, 600);
        }

        function closeBook() {
            const cover = document.getElementById('bookCover');
            const book = document.getElementById('bookObj');
            book.style.visibility = "hidden";
            cover.style.visibility = "visible";
            cover.style.opacity = "1";
            cover.style.transform = "rotateY(0deg)";
        }

        function styleBook() {
            let f = document.getElementById('fnt').value; 
            let s = document.getElementById('sz').value+"px";
            document.querySelectorAll('#diary textarea').forEach(t => { t.style.fontFamily=f; t.style.fontSize=s; });
        }

        function jump(v) { if(v) { day=v; buildDiary(); } }

        function searchWords() {
            const query = document.getElementById('searchTerm').value.toLowerCase();
            const res = document.getElementById('searchResults');
            res.innerHTML = "";
            if(query.length < 2) return;
            for (let d in logs) {
                if((logs[d].l + logs[d].r).toLowerCase().includes(query)) {
                    let div = document.createElement('div');
                    div.style.padding = "5px"; div.style.cursor = "pointer"; div.style.color = "var(--cherry)";
                    div.innerText = d;
                    div.onclick = () => { day = d; buildDiary(); };
                    res.appendChild(div);
                }
            }
        }

        function deleteEntry() {
            if (confirm("Burn this entry?")) {
                delete logs[day];
                localStorage.setItem('uv_logs', JSON.stringify(logs));
                buildDiary();
            }
        }
    </script>
</body>
</html>
